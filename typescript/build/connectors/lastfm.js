"use strict";var _apolloDatasourceRest=require("apollo-datasource-rest");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class LastFMAPI extends _apolloDatasourceRest.RESTDataSource{constructor(){super(),this.baseURL="http://ws.audioscrobbler.com"}async getUserInfo(a){const b=await this.get("2.0/",{method:"user.getinfo",user:a});return b.user}async getUserLovedTracks(a){const b=await this.get("2.0/",{method:"user.getlovedtracks",user:a});return b.lovedtracks.track}async getRecentTracks(a,{limit:b,page:c}){const d=await this.get("2.0/",{limit:b,method:"user.getrecenttracks",page:c,user:a});return d.recenttracks.track}async getArtistInfo(a){const b=await this.get("2.0/",{mbid:a,method:"artist.getinfo"});return b.artist}willSendRequest(a){a.params.set("api_key",this.context.apiKey),a.params.set("format","json")}}exports.default=LastFMAPI;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb25uZWN0b3JzL2xhc3RmbS50cyJdLCJuYW1lcyI6WyJMYXN0Rk1BUEkiLCJSRVNURGF0YVNvdXJjZSIsImNvbnN0cnVjdG9yIiwiYmFzZVVSTCIsImdldFVzZXJJbmZvIiwidXNlciIsImRhdGEiLCJnZXQiLCJtZXRob2QiLCJnZXRVc2VyTG92ZWRUcmFja3MiLCJsb3ZlZHRyYWNrcyIsInRyYWNrIiwiZ2V0UmVjZW50VHJhY2tzIiwibGltaXQiLCJwYWdlIiwicmVjZW50dHJhY2tzIiwiZ2V0QXJ0aXN0SW5mbyIsIm1iaWQiLCJhcnRpc3QiLCJ3aWxsU2VuZFJlcXVlc3QiLCJyZXF1ZXN0IiwicGFyYW1zIiwic2V0IiwiY29udGV4dCIsImFwaUtleSJdLCJtYXBwaW5ncyI6ImFBQUEsNEQsOEVBTWUsS0FBTUEsQ0FBQUEsU0FBTixRQUF3QkMscUNBQWUsQ0FDcERDLFdBQVcsRUFBRyxDQUNaLE9BRFksQ0FFWixLQUFLQyxPQUFMLENBQWUsOEJBQ2hCLENBRUQsS0FBYUMsQ0FBQUEsV0FBYixDQUF5QkMsQ0FBekIsQ0FBNkQsQ0FDM0QsS0FBTUMsQ0FBQUEsQ0FBMkIsQ0FBRyxLQUFNLE1BQUtDLEdBQUwsQ0FBUyxNQUFULENBQWlCLENBQ3pEQyxNQUFNLENBQUUsY0FEaUQsQ0FFekRILElBQUksQ0FBSkEsQ0FGeUQsQ0FBakIsQ0FBMUMsQ0FJQSxNQUFPQyxDQUFBQSxDQUFJLENBQUNELElBQ2IsQ0FFRCxLQUFhSSxDQUFBQSxrQkFBYixDQUFnQ0osQ0FBaEMsQ0FBZ0YsQ0FDOUUsS0FBTUMsQ0FBQUEsQ0FBc0MsQ0FBRyxLQUFNLE1BQUtDLEdBQUwsQ0FBUyxNQUFULENBQWlCLENBQ3BFQyxNQUFNLENBQUUscUJBRDRELENBRXBFSCxJQUFJLENBQUpBLENBRm9FLENBQWpCLENBQXJELENBSUEsTUFBT0MsQ0FBQUEsQ0FBSSxDQUFDSSxXQUFMLENBQWlCQyxLQUN6QixDQUVELEtBQWFDLENBQUFBLGVBQWIsQ0FBNkJQLENBQTdCLENBQTJDLENBQUVRLEtBQUssQ0FBTEEsQ0FBRixDQUFTQyxJQUFJLENBQUpBLENBQVQsQ0FBM0MsQ0FDb0MsQ0FDbEMsS0FBTVIsQ0FBQUEsQ0FBdUMsQ0FBRyxLQUFNLE1BQUtDLEdBQUwsQ0FBUyxNQUFULENBQWlCLENBQ3JFTSxLQUFLLENBQUxBLENBRHFFLENBRXJFTCxNQUFNLENBQUUsc0JBRjZELENBR3JFTSxJQUFJLENBQUpBLENBSHFFLENBSXJFVCxJQUFJLENBQUpBLENBSnFFLENBQWpCLENBQXRELENBT0EsTUFBT0MsQ0FBQUEsQ0FBSSxDQUFDUyxZQUFMLENBQWtCSixLQUMxQixDQUVELEtBQWFLLENBQUFBLGFBQWIsQ0FBMkJDLENBQTNCLENBQWlFLENBQy9ELEtBQU1YLENBQUFBLENBQTZCLENBQUcsS0FBTSxNQUFLQyxHQUFMLENBQVMsTUFBVCxDQUFpQixDQUMzRFUsSUFBSSxDQUFKQSxDQUQyRCxDQUUzRFQsTUFBTSxDQUFFLGdCQUZtRCxDQUFqQixDQUE1QyxDQUtBLE1BQU9GLENBQUFBLENBQUksQ0FBQ1ksTUFDYixDQUVNQyxlQUFQLENBQXVCQyxDQUF2QixDQUFxQyxDQUNuQ0EsQ0FBTyxDQUFDQyxNQUFSLENBQWVDLEdBQWYsQ0FBbUIsU0FBbkIsQ0FBOEIsS0FBS0MsT0FBTCxDQUFhQyxNQUEzQyxDQURtQyxDQUVuQ0osQ0FBTyxDQUFDQyxNQUFSLENBQWVDLEdBQWYsQ0FBbUIsUUFBbkIsQ0FBNkIsTUFBN0IsQ0FDRCxDQTlDbUQsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJFU1REYXRhU291cmNlIH0gZnJvbSAnYXBvbGxvLWRhdGFzb3VyY2UtcmVzdCc7XG5pbXBvcnQgeyBJTGFzdEZNQXJ0aXN0LCBJTGFzdEZNQXJ0aXN0Um9vdE9iamVjdCB9IGZyb20gJy4uL2ludGVyZmFjZXMvSUxhc3RGTUFydGlzdEluZm8nO1xuaW1wb3J0IHsgSUxhc3RGTVVzZXIsIElMYXN0Rk1Vc2VyUm9vdE9iamVjdCB9IGZyb20gJy4uL2ludGVyZmFjZXMvSUxhc3RGTVVzZXJJbmZvJztcbmltcG9ydCB7IElMYXN0Rk1Vc2VyTG92ZWR0cmFjaywgSUxhc3RGTVVzZXJMb3ZlZFRyYWNrc1Jvb3RPYmplY3QgfSBmcm9tICcuLi9pbnRlcmZhY2VzL0lMYXN0Rk1Vc2VyTG92ZWRUcmFja3MnO1xuaW1wb3J0IHsgSUxhc3RGTVVzZXJSZWNlbnRUcmFjaywgSUxhc3RGTVVzZXJSZWNlbnRUcmFja3NSb290T2JqZWN0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9JTGFzdEZNVXNlclJlY2VudFRyYWNrcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhc3RGTUFQSSBleHRlbmRzIFJFU1REYXRhU291cmNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmJhc2VVUkwgPSAnaHR0cDovL3dzLmF1ZGlvc2Nyb2JibGVyLmNvbSc7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0VXNlckluZm8odXNlcjogc3RyaW5nKTogUHJvbWlzZTxJTGFzdEZNVXNlcj4ge1xuICAgIGNvbnN0IGRhdGE6IElMYXN0Rk1Vc2VyUm9vdE9iamVjdCA9IGF3YWl0IHRoaXMuZ2V0KCcyLjAvJywge1xuICAgICAgbWV0aG9kOiAndXNlci5nZXRpbmZvJyxcbiAgICAgIHVzZXIsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGEudXNlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRVc2VyTG92ZWRUcmFja3ModXNlcjogc3RyaW5nKTogUHJvbWlzZTxJTGFzdEZNVXNlckxvdmVkdHJhY2tbXT4ge1xuICAgIGNvbnN0IGRhdGE6IElMYXN0Rk1Vc2VyTG92ZWRUcmFja3NSb290T2JqZWN0ID0gYXdhaXQgdGhpcy5nZXQoJzIuMC8nLCB7XG4gICAgICBtZXRob2Q6ICd1c2VyLmdldGxvdmVkdHJhY2tzJyxcbiAgICAgIHVzZXIsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGEubG92ZWR0cmFja3MudHJhY2s7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVjZW50VHJhY2tzKHVzZXI6IHN0cmluZywgeyBsaW1pdCwgcGFnZSB9OiB7IGxpbWl0OiBudW1iZXIsIHBhZ2U6IG51bWJlciB9KTpcbiAgICBQcm9taXNlPElMYXN0Rk1Vc2VyUmVjZW50VHJhY2tbXT4ge1xuICAgIGNvbnN0IGRhdGE6IElMYXN0Rk1Vc2VyUmVjZW50VHJhY2tzUm9vdE9iamVjdCA9IGF3YWl0IHRoaXMuZ2V0KCcyLjAvJywge1xuICAgICAgbGltaXQsXG4gICAgICBtZXRob2Q6ICd1c2VyLmdldHJlY2VudHRyYWNrcycsXG4gICAgICBwYWdlLFxuICAgICAgdXNlcixcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhLnJlY2VudHRyYWNrcy50cmFjaztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBcnRpc3RJbmZvKG1iaWQ6IHN0cmluZyk6IFByb21pc2U8SUxhc3RGTUFydGlzdD4ge1xuICAgIGNvbnN0IGRhdGE6IElMYXN0Rk1BcnRpc3RSb290T2JqZWN0ID0gYXdhaXQgdGhpcy5nZXQoJzIuMC8nLCB7XG4gICAgICBtYmlkLFxuICAgICAgbWV0aG9kOiAnYXJ0aXN0LmdldGluZm8nLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGEuYXJ0aXN0O1xuICB9XG5cbiAgcHVibGljIHdpbGxTZW5kUmVxdWVzdChyZXF1ZXN0OiBhbnkpIHtcbiAgICByZXF1ZXN0LnBhcmFtcy5zZXQoJ2FwaV9rZXknLCB0aGlzLmNvbnRleHQuYXBpS2V5KTtcbiAgICByZXF1ZXN0LnBhcmFtcy5zZXQoJ2Zvcm1hdCcsICdqc29uJyk7XG4gIH1cblxufVxuIl19